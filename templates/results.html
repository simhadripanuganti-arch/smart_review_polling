{% extends "base.html" %}
{% block content %}

<h2 class="results-title">Poll Results</h2>

{% if results %}

    {% set total_votes = 0 %}
    {% for r in results %}
        {% set total_votes = total_votes + r[1] %}
    {% endfor %}

    <div class="results-container">
        {% for r in results %}
            {% set percentage = (r[1] / total_votes * 100) if total_votes > 0 else 0 %}

            <div class="result-item">
                <div class="result-header">
                    <span>{{ r[0] }}</span>
                    <span>{{ r[1] }} votes ({{ "%.1f"|format(percentage) }}%)</span>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill"
                         style="width: {{ percentage }}%;">
                    </div>
                </div>
            </div>

        {% endfor %}
    </div>

{% else %}
    <p class="no-results">No votes yet.</p>
{% endif %}

<div style="text-align:center; margin-top:20px;">
    <a href="/dashboard" class="back-btn">Back to Dashboard</a>
</div>

{% endblock %}
